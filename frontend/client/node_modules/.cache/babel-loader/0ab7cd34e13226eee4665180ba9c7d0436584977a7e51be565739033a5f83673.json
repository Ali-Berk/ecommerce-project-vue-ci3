{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, vModelSelect as _vModelSelect, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container mt-4\"\n};\nconst _hoisted_2 = {\n  class: \"mb-3\"\n};\nconst _hoisted_3 = {\n  class: \"row\"\n};\nconst _hoisted_4 = {\n  class: \"col-md-4 mb-3\"\n};\nconst _hoisted_5 = {\n  class: \"col-md-4 mb-3\"\n};\nconst _hoisted_6 = [\"value\"];\nconst _hoisted_7 = {\n  class: \"col-md-4 mb-3\"\n};\nconst _hoisted_8 = {\n  class: \"mb-3\"\n};\nconst _hoisted_9 = {\n  class: \"mb-3\"\n};\nconst _hoisted_10 = [\"src\"];\nconst _hoisted_11 = {\n  class: \"d-flex gap-2\"\n};\nconst _hoisted_12 = [\"disabled\"];\nconst _hoisted_13 = {\n  key: 2,\n  class: \"text-muted\"\n};\nexport function render(_ctx, _cache) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"section\", _hoisted_1, [_cache[15] || (_cache[15] = _createElementVNode(\"h3\", {\n    class: \"mb-3\"\n  }, \"Ürün Düzenle\", -1 /* CACHED */)), _ctx.message ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    class: _normalizeClass(`alert ${_ctx.messageType}`)\n  }, _toDisplayString(_ctx.message), 3 /* TEXT, CLASS */)) : _createCommentVNode(\"v-if\", true), _ctx.loaded ? (_openBlock(), _createElementBlock(\"form\", {\n    key: 1,\n    onSubmit: _cache[6] || (_cache[6] = _withModifiers((...args) => _ctx.updateProduct && _ctx.updateProduct(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_2, [_cache[7] || (_cache[7] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, \"Başlık\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _ctx.form.title = $event),\n    type: \"text\",\n    class: \"form-control\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.form.title]])]), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_cache[8] || (_cache[8] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, \"Fiyat (₺)\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => _ctx.form.price = $event),\n    type: \"number\",\n    step: \"0.01\",\n    class: \"form-control\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.form.price, void 0, {\n    number: true\n  }]])]), _createElementVNode(\"div\", _hoisted_5, [_cache[10] || (_cache[10] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, \"Kategori\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => _ctx.form.category_fk = $event),\n    class: \"form-select\",\n    required: \"\"\n  }, [_cache[9] || (_cache[9] = _createElementVNode(\"option\", {\n    value: \"\"\n  }, \"Seçin\", -1 /* CACHED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.categories, c => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: c.category_id,\n      value: c.category\n    }, _toDisplayString(c.category_name), 9 /* TEXT, PROPS */, _hoisted_6);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, _ctx.form.category_fk]])]), _createElementVNode(\"div\", _hoisted_7, [_cache[11] || (_cache[11] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, \"Stok Adedi\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => _ctx.form.stock = $event),\n    type: \"number\",\n    min: \"0\",\n    class: \"form-control\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.form.stock, void 0, {\n    number: true\n  }]])])]), _createElementVNode(\"div\", _hoisted_8, [_cache[12] || (_cache[12] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, \"Açıklama\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => _ctx.form.description = $event),\n    class: \"form-control\",\n    rows: \"3\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.form.description]])]), _createElementVNode(\"div\", _hoisted_9, [_cache[13] || (_cache[13] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, \"Thumbnail (URL)\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => _ctx.form.thumbnail = $event),\n    type: \"url\",\n    class: \"form-control\",\n    placeholder: \"https://...\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.form.thumbnail]]), _ctx.form.thumbnail ? (_openBlock(), _createElementBlock(\"img\", {\n    key: 0,\n    src: _ctx.form.thumbnail,\n    class: \"mt-2 border rounded\",\n    style: {\n      \"width\": \"150px\",\n      \"height\": \"100px\",\n      \"object-fit\": \"cover\"\n    }\n  }, null, 8 /* PROPS */, _hoisted_10)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"button\", {\n    class: \"btn btn-primary\",\n    type: \"submit\",\n    disabled: _ctx.loading\n  }, _toDisplayString(_ctx.loading ? 'Güncelleniyor...' : 'Kaydet'), 9 /* TEXT, PROPS */, _hoisted_12), _createVNode(_component_router_link, {\n    class: \"btn btn-secondary\",\n    to: \"/dashboard/products\"\n  }, {\n    default: _withCtx(() => [...(_cache[14] || (_cache[14] = [_createTextVNode(\"Geri\", -1 /* CACHED */)]))]),\n    _: 1 /* STABLE */\n  })])], 32 /* NEED_HYDRATION */)) : (_openBlock(), _createElementBlock(\"p\", _hoisted_13, \"Yükleniyor...\"))]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_ctx","message","_normalizeClass","messageType","loaded","onSubmit","_cache","_withModifiers","args","updateProduct","_hoisted_2","form","title","$event","type","required","_hoisted_3","_hoisted_4","price","step","number","_hoisted_5","category_fk","value","_Fragment","_renderList","categories","c","key","category_id","category","category_name","_hoisted_6","_hoisted_7","stock","min","_hoisted_8","description","rows","_hoisted_9","thumbnail","placeholder","src","style","_hoisted_11","disabled","loading","_hoisted_12","_createVNode","_component_router_link","to","_hoisted_13"],"sources":["/home/aliberk/Masaüstü/ecommerce/frontend/client/src/views/DashboardProductEditView.vue"],"sourcesContent":["<template>\n  <section class=\"container mt-4\">\n    <h3 class=\"mb-3\">Ürün Düzenle</h3>\n\n    <div v-if=\"message\" :class=\"`alert ${messageType}`\">{{ message }}</div>\n\n    <form v-if=\"loaded\" @submit.prevent=\"updateProduct\">\n      <div class=\"mb-3\">\n        <label class=\"form-label\">Başlık</label>\n        <input v-model=\"form.title\" type=\"text\" class=\"form-control\" required />\n      </div>\n\n      <div class=\"row\">\n        <div class=\"col-md-4 mb-3\">\n          <label class=\"form-label\">Fiyat (₺)</label>\n          <input v-model.number=\"form.price\" type=\"number\" step=\"0.01\" class=\"form-control\" required />\n        </div>\n\n        <div class=\"col-md-4 mb-3\">\n          <label class=\"form-label\">Kategori</label>\n          <select v-model=\"form.category_fk\" class=\"form-select\" required>\n            <option value=\"\">Seçin</option>\n            <option v-for=\"c in categories\" :key=\"c.category_id\" :value=\"c.category\">\n              {{ c.category_name }}\n            </option>\n          </select>\n        </div>\n\n        <div class=\"col-md-4 mb-3\">\n          <label class=\"form-label\">Stok Adedi</label>\n          <input v-model.number=\"form.stock\" type=\"number\" min=\"0\" class=\"form-control\" />\n        </div>\n      </div>\n\n      <div class=\"mb-3\">\n        <label class=\"form-label\">Açıklama</label>\n        <textarea v-model=\"form.description\" class=\"form-control\" rows=\"3\"></textarea>\n      </div>\n\n      <div class=\"mb-3\">\n        <label class=\"form-label\">Thumbnail (URL)</label>\n        <input v-model=\"form.thumbnail\" type=\"url\" class=\"form-control\" placeholder=\"https://...\" />\n        <img\n          v-if=\"form.thumbnail\"\n          :src=\"form.thumbnail\"\n          class=\"mt-2 border rounded\"\n          style=\"width:150px; height:100px; object-fit:cover;\"\n        />\n      </div>\n\n      <div class=\"d-flex gap-2\">\n        <button class=\"btn btn-primary\" type=\"submit\" :disabled=\"loading\">\n          {{ loading ? 'Güncelleniyor...' : 'Kaydet' }}\n        </button>\n        <router-link class=\"btn btn-secondary\" to=\"/dashboard/products\">Geri</router-link>\n      </div>\n    </form>\n    <p v-else class=\"text-muted\">Yükleniyor...</p>\n  </section>\n</template>\n\n<script setup>\nimport { reactive, ref, computed, onMounted } from 'vue'\nimport { useRoute } from 'vue-router'\nimport { useProductStore } from '../store/ProductsStore'\n\nconst route = useRoute()\nconst store = useProductStore()\n\nconst form = reactive({\n  id: '',\n  title: '',\n  price: 0,\n  category_fk: '',\n  stock: 0,\n  description: '',\n  thumbnail: ''\n})\n\nconst message = ref('')\nconst messageType = ref('alert-success')\nconst loading = ref(false)\nconst loaded = ref(false)\n\nconst categories = computed(() => store.categories.categories)\n\nfunction loadProductFromStore() {\n  const id = route.params.slug;\n  const p = (store.products).find(p => String(p.product_id) == id)\n  if (p) {\n    form.id = p.product_id\n    form.title = p.title ?? ''\n    form.price = p.price ?? 0\n    form.category_fk = p.category_fk ?? ''\n    form.stock = p.stock ?? 0\n    form.description = p.description ?? ''\n    form.thumbnail = p.thumbnail ?? ''\n    loaded.value = true\n  } else {\n    message.value = 'Ürün bulunamadı.'\n    messageType.value = 'alert-danger'\n  }\n}\n\nasync updateProduct(data) {\n      try {\n        await axios.post('http://localhost:8080/api/update_product', data, {\n          withCredentials: true\n        })\n\n        const index = this.products.findIndex(p => p.product_id === data.id)\n        if (index !== -1) this.products[index] = { ...this.products[index], ...data }\n\n        return true\n      } catch (err) {\n        console.error('updateProduct error:', err)\n        throw err\n      }}\n\nonMounted(loadProductFromStore)\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}