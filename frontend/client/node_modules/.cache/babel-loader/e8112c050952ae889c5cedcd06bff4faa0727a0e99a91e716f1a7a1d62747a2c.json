{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, vModelSelect as _vModelSelect, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container mt-4\"\n};\nconst _hoisted_2 = {\n  class: \"mb-3\"\n};\nconst _hoisted_3 = {\n  class: \"row\"\n};\nconst _hoisted_4 = {\n  class: \"col-md-4 mb-3\"\n};\nconst _hoisted_5 = {\n  class: \"col-md-4 mb-3\"\n};\nconst _hoisted_6 = [\"value\"];\nconst _hoisted_7 = {\n  class: \"col-md-4 mb-3\"\n};\nconst _hoisted_8 = {\n  class: \"mb-3\"\n};\nconst _hoisted_9 = {\n  class: \"mb-3\"\n};\nconst _hoisted_10 = [\"src\"];\nconst _hoisted_11 = {\n  class: \"d-flex gap-2\"\n};\nconst _hoisted_12 = [\"disabled\"];\nconst _hoisted_13 = {\n  key: 2,\n  class: \"text-muted\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"section\", _hoisted_1, [_cache[15] || (_cache[15] = _createElementVNode(\"h3\", {\n    class: \"mb-3\"\n  }, \"Ürün Düzenle\", -1 /* CACHED */)), $data.message ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    class: _normalizeClass(`alert ${$data.messageType}`)\n  }, _toDisplayString($data.message), 3 /* TEXT, CLASS */)) : _createCommentVNode(\"v-if\", true), $data.loaded ? (_openBlock(), _createElementBlock(\"form\", {\n    key: 1,\n    onSubmit: _cache[6] || (_cache[6] = _withModifiers((...args) => $options.updateProduct && $options.updateProduct(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_2, [_cache[7] || (_cache[7] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, \"Başlık\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.form.title = $event),\n    type: \"text\",\n    class: \"form-control\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.title]])]), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_cache[8] || (_cache[8] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, \"Fiyat (₺)\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.form.price = $event),\n    type: \"number\",\n    step: \"0.01\",\n    class: \"form-control\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.price, void 0, {\n    number: true\n  }]])]), _createElementVNode(\"div\", _hoisted_5, [_cache[10] || (_cache[10] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, \"Kategori\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.form.category_fk = $event),\n    class: \"form-select\",\n    required: \"\"\n  }, [_cache[9] || (_cache[9] = _createElementVNode(\"option\", {\n    value: \"\"\n  }, \"Seçin\", -1 /* CACHED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.categories, c => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: c.category_id,\n      value: c.category_id\n    }, _toDisplayString(c.category_name), 9 /* TEXT, PROPS */, _hoisted_6);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $data.form.category_fk]])]), _createElementVNode(\"div\", _hoisted_7, [_cache[11] || (_cache[11] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, \"Stok Adedi\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.form.stock = $event),\n    type: \"number\",\n    min: \"0\",\n    class: \"form-control\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.stock, void 0, {\n    number: true\n  }]])])]), _createElementVNode(\"div\", _hoisted_8, [_cache[12] || (_cache[12] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, \"Açıklama\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.form.description = $event),\n    class: \"form-control\",\n    rows: \"3\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.description]])]), _createElementVNode(\"div\", _hoisted_9, [_cache[13] || (_cache[13] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, \"Thumbnail (URL)\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.form.thumbnail = $event),\n    type: \"url\",\n    class: \"form-control\",\n    placeholder: \"https://...\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.thumbnail]]), $data.form.thumbnail ? (_openBlock(), _createElementBlock(\"img\", {\n    key: 0,\n    src: $data.form.thumbnail,\n    class: \"mt-2 border rounded\",\n    style: {\n      \"width\": \"150px\",\n      \"height\": \"100px\",\n      \"object-fit\": \"cover\"\n    }\n  }, null, 8 /* PROPS */, _hoisted_10)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"button\", {\n    class: \"btn btn-primary\",\n    type: \"submit\",\n    disabled: $data.loading\n  }, _toDisplayString($data.loading ? 'Güncelleniyor...' : 'Kaydet'), 9 /* TEXT, PROPS */, _hoisted_12), _createVNode(_component_router_link, {\n    class: \"btn btn-secondary\",\n    to: \"/dashboard/products\"\n  }, {\n    default: _withCtx(() => [...(_cache[14] || (_cache[14] = [_createTextVNode(\"Geri\", -1 /* CACHED */)]))]),\n    _: 1 /* STABLE */\n  })])], 32 /* NEED_HYDRATION */)) : (_openBlock(), _createElementBlock(\"p\", _hoisted_13, \"Yükleniyor...\"))]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","$data","message","_normalizeClass","messageType","loaded","onSubmit","_cache","_withModifiers","args","$options","updateProduct","_hoisted_2","form","title","$event","type","required","_hoisted_3","_hoisted_4","price","step","number","_hoisted_5","category_fk","value","_Fragment","_renderList","categories","c","key","category_id","category_name","_hoisted_6","_hoisted_7","stock","min","_hoisted_8","description","rows","_hoisted_9","thumbnail","placeholder","src","style","_hoisted_11","disabled","loading","_hoisted_12","_createVNode","_component_router_link","to","_hoisted_13"],"sources":["/home/aliberk/Masaüstü/ecommerce/frontend/client/src/views/DashboardProductEditView.vue"],"sourcesContent":["<template>\n  <section class=\"container mt-4\">\n    <h3 class=\"mb-3\">Ürün Düzenle</h3>\n\n    <div v-if=\"message\" :class=\"`alert ${messageType}`\">{{ message }}</div>\n\n    <form v-if=\"loaded\" @submit.prevent=\"updateProduct\">\n      <div class=\"mb-3\">\n        <label class=\"form-label\">Başlık</label>\n        <input v-model=\"form.title\" type=\"text\" class=\"form-control\" required />\n      </div>\n\n      <div class=\"row\">\n        <div class=\"col-md-4 mb-3\">\n          <label class=\"form-label\">Fiyat (₺)</label>\n          <input v-model.number=\"form.price\" type=\"number\" step=\"0.01\" class=\"form-control\" required />\n        </div>\n\n        <div class=\"col-md-4 mb-3\">\n          <label class=\"form-label\">Kategori</label>\n          <select v-model=\"form.category_fk\" class=\"form-select\" required>\n            <option value=\"\">Seçin</option>\n            <option v-for=\"c in categories\" :key=\"c.category_id\" :value=\"c.category_id\">\n              {{ c.category_name }}\n            </option>\n          </select>\n        </div>\n\n        <div class=\"col-md-4 mb-3\">\n          <label class=\"form-label\">Stok Adedi</label>\n          <input v-model.number=\"form.stock\" type=\"number\" min=\"0\" class=\"form-control\" />\n        </div>\n      </div>\n\n      <div class=\"mb-3\">\n        <label class=\"form-label\">Açıklama</label>\n        <textarea v-model=\"form.description\" class=\"form-control\" rows=\"3\"></textarea>\n      </div>\n\n      <div class=\"mb-3\">\n        <label class=\"form-label\">Thumbnail (URL)</label>\n        <input v-model=\"form.thumbnail\" type=\"url\" class=\"form-control\" placeholder=\"https://...\" />\n        <img\n          v-if=\"form.thumbnail\"\n          :src=\"form.thumbnail\"\n          class=\"mt-2 border rounded\"\n          style=\"width:150px; height:100px; object-fit:cover;\"\n        />\n      </div>\n\n      <div class=\"d-flex gap-2\">\n        <button class=\"btn btn-primary\" type=\"submit\" :disabled=\"loading\">\n          {{ loading ? 'Güncelleniyor...' : 'Kaydet' }}\n        </button>\n        <router-link class=\"btn btn-secondary\" to=\"/dashboard/products\">Geri</router-link>\n      </div>\n    </form>\n\n    <p v-else class=\"text-muted\">Yükleniyor...</p>\n  </section>\n</template>\n\n<script>\nimport { useRoute } from \"vue-router\";\nimport { useProductStore } from \"../store/ProductsStore\";\n\nexport default {\n  name: \"AdminEditProduct\",\n  data() {\n    return {\n      form: {\n        id: \"\",\n        title: \"\",\n        price: 0,\n        category_fk: \"\",\n        stock: 0,\n        description: \"\",\n        thumbnail: \"\"\n      },\n      message: \"\",\n      messageType: \"alert-success\",\n      loading: false,\n      loaded: false\n    };\n  },\n  computed: {\n    categories() {\n      const store = useProductStore();\n      return store.categories || [];\n    }\n  },\n  methods: {\n    loadProductFromStore() {\n      const route = useRoute();\n      const store = useProductStore();\n      const id = route.params.id;\n      const p = store.products.find(p => p.product_id == id);\n      if (p) {\n        this.form = {\n          id: p.product_id,\n          title: p.title,\n          price: p.price,\n          category_fk: p.category_fk,\n          stock: p.stock,\n          description: p.description,\n          thumbnail: p.thumbnail\n        };\n        this.loaded = true;\n      } else {\n        this.message = \"Ürün bulunamadı.\";\n        this.messageType = \"alert-danger\";\n      }\n    },\n    async updateProduct() {\n      this.loading = true;\n      try {\n        const store = useProductStore();\n        await store.updateProduct(this.form); // store içindeki güncelleme fonksiyonunu çağır\n        this.messageType = \"alert-success\";\n        this.message = \"Ürün başarıyla güncellendi.\";\n      } catch (err) {\n        console.error(err);\n        this.messageType = \"alert-danger\";\n        this.message = \"Güncelleme hatası.\";\n      } finally {\n        this.loading = false;\n      }\n    }\n  },\n  mounted() {\n    this.loadProductFromStore();\n  }\n};\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}