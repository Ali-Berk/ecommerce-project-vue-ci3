{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, vModelSelect as _vModelSelect, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container mt-4\"\n};\nconst _hoisted_2 = {\n  class: \"mb-3\"\n};\nconst _hoisted_3 = {\n  class: \"row\"\n};\nconst _hoisted_4 = {\n  class: \"col-md-4 mb-3\"\n};\nconst _hoisted_5 = {\n  class: \"col-md-4 mb-3\"\n};\nconst _hoisted_6 = [\"value\"];\nconst _hoisted_7 = {\n  class: \"col-md-4 mb-3\"\n};\nconst _hoisted_8 = {\n  class: \"mb-3\"\n};\nconst _hoisted_9 = {\n  class: \"mb-3\"\n};\nconst _hoisted_10 = {\n  class: \"mb-3\"\n};\nconst _hoisted_11 = {\n  key: 0,\n  class: \"mb-3 d-flex gap-2 flex-wrap\"\n};\nconst _hoisted_12 = [\"src\"];\nconst _hoisted_13 = {\n  class: \"d-flex gap-2\"\n};\nconst _hoisted_14 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"section\", _hoisted_1, [_cache[17] || (_cache[17] = _createElementVNode(\"h3\", {\n    class: \"mb-3\"\n  }, \"Yeni Ürün Ekle\", -1 /* CACHED */)), $data.message ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    class: _normalizeClass(`alert ${$data.messageType}`),\n    role: \"alert\"\n  }, _toDisplayString($data.message), 3 /* TEXT, CLASS */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"form\", {\n    onSubmit: _cache[8] || (_cache[8] = _withModifiers((...args) => $options.submit && $options.submit(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_2, [_cache[9] || (_cache[9] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, \"Başlık\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.form.title = $event),\n    type: \"text\",\n    class: \"form-control\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.title]])]), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_cache[10] || (_cache[10] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, \"Fiyat (TL)\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.form.price = $event),\n    type: \"number\",\n    step: \"0.01\",\n    class: \"form-control\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.price, void 0, {\n    number: true\n  }]])]), _createElementVNode(\"div\", _hoisted_5, [_cache[12] || (_cache[12] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, \"Kategori\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.form.category_fk = $event),\n    class: \"form-select\",\n    required: \"\"\n  }, [_cache[11] || (_cache[11] = _createElementVNode(\"option\", {\n    value: \"\"\n  }, \"Seçin\", -1 /* CACHED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.categories, c => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: c.category_id,\n      value: c.category_id\n    }, _toDisplayString(c.category_name), 9 /* TEXT, PROPS */, _hoisted_6);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $data.form.category_fk]])]), _createElementVNode(\"div\", _hoisted_7, [_cache[13] || (_cache[13] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, \"Stok Adedi\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.form.stock = $event),\n    type: \"number\",\n    class: \"form-control\",\n    min: \"0\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.stock, void 0, {\n    number: true\n  }]])])]), _createElementVNode(\"div\", _hoisted_8, [_cache[14] || (_cache[14] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, \"Kısa Açıklama\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.form.description = $event),\n    class: \"form-control\",\n    rows: \"3\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.description]])]), _createElementVNode(\"div\", _hoisted_9, [_cache[15] || (_cache[15] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, \"Thumbnail (URL)\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.form.thumbnail = $event),\n    type: \"url\",\n    class: \"form-control\",\n    placeholder: \"https://...\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.thumbnail]])]), _createElementVNode(\"div\", _hoisted_10, [_cache[16] || (_cache[16] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, \"Resimler (birden fazla yükleyebilirsiniz)\", -1 /* CACHED */)), _createElementVNode(\"input\", {\n    ref: \"filesInput\",\n    onChange: _cache[6] || (_cache[6] = (...args) => $options.onFilesChange && $options.onFilesChange(...args)),\n    type: \"file\",\n    class: \"form-control\",\n    multiple: \"\",\n    accept: \"image/*\"\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */)]), $data.previews.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.previews, (p, i) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: i,\n      class: \"preview-item\"\n    }, [_createElementVNode(\"img\", {\n      src: p,\n      alt: \"\",\n      style: {\n        \"width\": \"100px\",\n        \"height\": \"80px\",\n        \"object-fit\": \"cover\",\n        \"border-radius\": \"6px\",\n        \"border\": \"1px solid #ddd\"\n      }\n    }, null, 8 /* PROPS */, _hoisted_12)]);\n  }), 128 /* KEYED_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"button\", {\n    disabled: $data.loading,\n    class: \"btn btn-primary\",\n    type: \"submit\"\n  }, _toDisplayString($data.loading ? 'Gönderiliyor...' : 'Ürünü Ekle'), 9 /* TEXT, PROPS */, _hoisted_14), _createElementVNode(\"button\", {\n    class: \"btn btn-secondary\",\n    type: \"button\",\n    onClick: _cache[7] || (_cache[7] = (...args) => $options.resetForm && $options.resetForm(...args))\n  }, \"Temizle\")])], 32 /* NEED_HYDRATION */)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","$data","message","_normalizeClass","messageType","role","onSubmit","_cache","_withModifiers","args","$options","submit","_hoisted_2","form","title","$event","type","required","_hoisted_3","_hoisted_4","price","step","number","_hoisted_5","category_fk","value","_Fragment","_renderList","categories","c","key","category_id","category_name","_hoisted_6","_hoisted_7","stock","min","_hoisted_8","description","rows","_hoisted_9","thumbnail","placeholder","_hoisted_10","ref","onChange","onFilesChange","multiple","accept","previews","length","_hoisted_11","p","i","src","alt","style","_hoisted_13","disabled","loading","_hoisted_14","onClick","resetForm"],"sources":["/home/aliberk/Masaüstü/ecommerce/frontend/client/src/views/DashboardAddProductView.vue"],"sourcesContent":["<template>\n  <section class=\"container mt-4\">\n    <h3 class=\"mb-3\">Yeni Ürün Ekle</h3>\n\n    <div v-if=\"message\" :class=\"`alert ${messageType}`\" role=\"alert\">{{ message }}</div>\n\n    <form @submit.prevent=\"submit\">\n      <div class=\"mb-3\">\n        <label class=\"form-label\">Başlık</label>\n        <input v-model=\"form.title\" type=\"text\" class=\"form-control\" required />\n      </div>\n\n      <div class=\"row\">\n        <div class=\"col-md-4 mb-3\">\n          <label class=\"form-label\">Fiyat (TL)</label>\n          <input v-model.number=\"form.price\" type=\"number\" step=\"0.01\" class=\"form-control\" required />\n        </div>\n\n        <div class=\"col-md-4 mb-3\">\n          <label class=\"form-label\">Kategori</label>\n          <select v-model=\"form.category_fk\" class=\"form-select\" required>\n            <option value=\"\">Seçin</option>\n            <option v-for=\"c in categories\" :key=\"c.category_id\" :value=\"c.category_id\">{{ c.category_name }}</option>\n          </select>\n        </div>\n\n        <div class=\"col-md-4 mb-3\">\n          <label class=\"form-label\">Stok Adedi</label>\n          <input v-model.number=\"form.stock\" type=\"number\" class=\"form-control\" min=\"0\" required />\n        </div>\n      </div>\n\n      <div class=\"mb-3\">\n        <label class=\"form-label\">Kısa Açıklama</label>\n        <textarea v-model=\"form.description\" class=\"form-control\" rows=\"3\"></textarea>\n      </div>\n\n      <div class=\"mb-3\">\n        <label class=\"form-label\">Thumbnail (URL)</label>\n        <input v-model=\"form.thumbnail\" type=\"url\" class=\"form-control\" placeholder=\"https://...\" />\n      </div>\n\n      <div class=\"mb-3\">\n        <label class=\"form-label\">Resimler (birden fazla yükleyebilirsiniz)</label>\n        <input ref=\"filesInput\" @change=\"onFilesChange\" type=\"file\" class=\"form-control\" multiple accept=\"image/*\" />\n      </div>\n\n      <div v-if=\"previews.length\" class=\"mb-3 d-flex gap-2 flex-wrap\">\n        <div v-for=\"(p, i) in previews\" :key=\"i\" class=\"preview-item\">\n          <img :src=\"p\" alt=\"\" style=\"width:100px;height:80px;object-fit:cover;border-radius:6px;border:1px solid #ddd\" />\n        </div>\n      </div>\n\n      <div class=\"d-flex gap-2\">\n        <button :disabled=\"loading\" class=\"btn btn-primary\" type=\"submit\">\n          {{ loading ? 'Gönderiliyor...' : 'Ürünü Ekle' }}\n        </button>\n        <button class=\"btn btn-secondary\" type=\"button\" @click=\"resetForm\">Temizle</button>\n      </div>\n    </form>\n  </section>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { useProductStore } from \"../store/ProductsStore\"; // senin store yolu neyse o\nexport default {\n  name: \"AdminAddProduct\",\n  data() {\n    return {\n      form: {\n        title: \"\",\n        price: null,\n        category_fk: \"\",\n        stock: 0,\n        description: \"\",\n        thumbnail: \"\"\n      },\n      files: [],        // File list\n      previews: [],     // preview urls\n      loading: false,\n      message: \"\",\n      messageType: \"alert-success\",\n      categories: [\"asdasd\"]\n    };\n  },\n  methods: {\n    // async loadCategoriesFromApi() {\n    //   try {\n    //     const res = await axios.get(\"http://localhost:8080/api/get_categories\"); // backend endpoint varsa\n    //     // backend yapına göre res.data veya res.data.categories olabilir\n    //     this.categories = Array.isArray(res.data) ? res.data : (res.data.categories || []);\n    //   } catch (err) {\n    //     console.error(\"Kategori yüklenemedi:\", err);\n    //     this.categories = [];\n    //   }\n    // },\n    onFilesChange(e) {\n      const inputFiles = Array.from(e.target.files || []);\n      this.files = inputFiles;\n      // preview\n      this.previews = [];\n      inputFiles.forEach(file => {\n        const reader = new FileReader();\n        reader.onload = ev => {\n          this.previews.push(ev.target.result);\n        };\n        reader.readAsDataURL(file);\n      });\n    },\n    resetForm() {\n      this.form = { title: \"\", price: null, category_fk: \"\", stock: 0, description: \"\", thumbnail: \"\" };\n      this.files = [];\n      this.previews = [];\n      this.$refs.filesInput && (this.$refs.filesInput.value = \"\");\n      this.message = \"\";\n    },\n    async submit() {\n     \n      if (!this.form.title || !this.form.price || !this.form.category_fk) {\n        this.messageType = \"alert-danger\";\n        this.message = \"Başlık, fiyat ve kategori zorunludur.\";\n        return;\n      }\n\n      this.loading = true;\n      this.message = \"\";\n\n      try {\n        const fd = new FormData();\n        fd.append(\"title\", this.form.title);\n        fd.append(\"price\", this.form.price);\n        fd.append(\"category_fk\", this.form.category_fk);\n        fd.append(\"stock\", this.form.stock);\n        fd.append(\"description\", this.form.description || \"\");\n        fd.append(\"thumbnail\", this.form.thumbnail || \"\");\n\n        // dosyaları ekle (backend order: files[])\n        this.files.forEach((f, i) => {\n          fd.append(\"images[]\", f, f.name);\n        });\n\n        // API endpoint adını backendine göre ayarla\n        const res = await axios.post(\"http://localhost:8080/api/addProduct\", fd, {\n          headers: { \"Content-Type\": \"multipart/form-data\" },\n          withCredentials: true\n        });\n\n        if (res.data && (res.data.status === \"success\")) {\n          this.messageType = \"alert-success\";\n          this.message = \"Ürün başarıyla eklendi.\";\n          // store'u yenile (varsa)\n          try {\n            const store = useProductStore();\n            if (store && typeof store.loadCategory === \"function\") {\n              await store.loadCategory();\n            }\n          } catch (e) {\n            console.log(e);\n          }\n          this.resetForm();\n        } else {\n          this.messageType = \"alert-danger\";\n          this.message = res.data?.message || \"Ürün eklenirken bir hata oluştu.\";\n        }\n      } catch (err) {\n        console.error(err);\n        this.messageType = \"alert-danger\";\n        this.message = \"İstek sırasında bir hata oluştu.\";\n      } finally {\n        this.loading = false;\n      }\n    }\n  },\n  mounted() {\n    // this.loadCategoriesFromApi();\n  }\n};\n</script>\n\n<style scoped>\n.preview-item {\n  display: inline-block;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}