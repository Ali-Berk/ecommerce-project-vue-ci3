{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container mt-4\"\n};\nconst _hoisted_2 = {\n  class: \"filters mb-4\"\n};\nconst _hoisted_3 = {\n  class: \"table table-bordered align-middle text-center\"\n};\nconst _hoisted_4 = [\"src\"];\nconst _hoisted_5 = [\"onClick\"];\nconst _hoisted_6 = [\"onClick\"];\nconst _hoisted_7 = {\n  key: 0,\n  class: \"text-muted mt-3 text-center\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"section\", _hoisted_1, [_cache[6] || (_cache[6] = _createElementVNode(\"h3\", {\n    class: \"mb-3\"\n  }, \"Ürün Yönetimi\", -1 /* CACHED */)), _createCommentVNode(\" Filtre Alanı \"), _createElementVNode(\"div\", _hoisted_2, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.search = $event),\n    placeholder: \"Ürün adı ara...\",\n    class: \"form-control mb-2\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.search]]), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.selectedCategory = $event),\n    class: \"form-select mb-2\"\n  }, [_cache[3] || (_cache[3] = _createElementVNode(\"option\", {\n    value: \"\"\n  }, \"Tüm Kategoriler\", -1 /* CACHED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.categories, cat => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: cat\n    }, _toDisplayString(cat), 1 /* TEXT */);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $setup.selectedCategory]]), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.stockFilter = $event),\n    class: \"form-select\"\n  }, [...(_cache[4] || (_cache[4] = [_createElementVNode(\"option\", {\n    value: \"\"\n  }, \"Tüm Stoklar\", -1 /* CACHED */), _createElementVNode(\"option\", {\n    value: \"in\"\n  }, \"Stokta\", -1 /* CACHED */), _createElementVNode(\"option\", {\n    value: \"out\"\n  }, \"Stokta Yok\", -1 /* CACHED */)]))], 512 /* NEED_PATCH */), [[_vModelSelect, $setup.stockFilter]])]), _createCommentVNode(\" Ürün Tablosu \"), _createElementVNode(\"table\", _hoisted_3, [_cache[5] || (_cache[5] = _createElementVNode(\"thead\", {\n    class: \"table-dark\"\n  }, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"ID\"), _createElementVNode(\"th\", null, \"Görsel\"), _createElementVNode(\"th\", null, \"Başlık\"), _createElementVNode(\"th\", null, \"Kategori\"), _createElementVNode(\"th\", null, \"Fiyat\"), _createElementVNode(\"th\", null, \"Stok\"), _createElementVNode(\"th\", null, \"İşlemler\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.filteredProducts, p => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: p.product_id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(p.product_id), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"img\", {\n      src: p.thumbnail,\n      alt: \"\",\n      width: \"60\",\n      class: \"rounded\"\n    }, null, 8 /* PROPS */, _hoisted_4)]), _createElementVNode(\"td\", null, _toDisplayString(p.title), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(p.category), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(p.price) + \" ₺\", 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"span\", {\n      class: _normalizeClass(p.stock > 0 ? 'text-success' : 'text-danger')\n    }, _toDisplayString(p.stock > 0 ? 'Stokta' : 'Tükendi'), 3 /* TEXT, CLASS */)]), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      class: \"btn btn-warning btn-sm me-2\",\n      onClick: $event => $setup.editProduct(p)\n    }, \"Düzenle\", 8 /* PROPS */, _hoisted_5), _createElementVNode(\"button\", {\n      class: \"btn btn-danger btn-sm\",\n      onClick: $event => $setup.deleteProduct(p.product_id)\n    }, \"Sil\", 8 /* PROPS */, _hoisted_6)])]);\n  }), 128 /* KEYED_FRAGMENT */))])]), !$setup.filteredProducts.length ? (_openBlock(), _createElementBlock(\"p\", _hoisted_7, \"Hiç ürün bulunamadı.\")) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_createCommentVNode","_hoisted_2","$setup","search","$event","placeholder","selectedCategory","value","_Fragment","_renderList","categories","cat","key","_toDisplayString","stockFilter","_hoisted_3","filteredProducts","p","product_id","src","thumbnail","alt","width","title","category","price","_normalizeClass","stock","onClick","editProduct","_hoisted_5","deleteProduct","_hoisted_6","length","_hoisted_7"],"sources":["/home/aliberk/Masaüstü/ecommerce/frontend/client/src/views/DashboardProductsView.vue"],"sourcesContent":["<template>\n  <section class=\"container mt-4\">\n    <h3 class=\"mb-3\">Ürün Yönetimi</h3>\n\n    <!-- Filtre Alanı -->\n    <div class=\"filters mb-4\">\n      <input v-model=\"search\" placeholder=\"Ürün adı ara...\" class=\"form-control mb-2\" />\n      <select v-model=\"selectedCategory\" class=\"form-select mb-2\">\n        <option value=\"\">Tüm Kategoriler</option>\n        <option v-for=\"cat in categories\" :key=\"cat\">{{ cat }}</option>\n      </select>\n      <select v-model=\"stockFilter\" class=\"form-select\">\n        <option value=\"\">Tüm Stoklar</option>\n        <option value=\"in\">Stokta</option>\n        <option value=\"out\">Stokta Yok</option>\n      </select>\n    </div>\n\n    <!-- Ürün Tablosu -->\n    <table class=\"table table-bordered align-middle text-center\">\n      <thead class=\"table-dark\">\n        <tr>\n          <th>ID</th>\n          <th>Görsel</th>\n          <th>Başlık</th>\n          <th>Kategori</th>\n          <th>Fiyat</th>\n          <th>Stok</th>\n          <th>İşlemler</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"p in filteredProducts\" :key=\"p.product_id\">\n          <td>{{ p.product_id }}</td>\n          <td><img :src=\"p.thumbnail\" alt=\"\" width=\"60\" class=\"rounded\" /></td>\n          <td>{{ p.title }}</td>\n          <td>{{ p.category }}</td>\n          <td>{{ p.price }} ₺</td>\n          <td>\n            <span :class=\"p.stock > 0 ? 'text-success' : 'text-danger'\">\n              {{ p.stock > 0 ? 'Stokta' : 'Tükendi' }}\n            </span>\n          </td>\n          <td>\n            <button class=\"btn btn-warning btn-sm me-2\" @click=\"editProduct(p)\">Düzenle</button>\n            <button class=\"btn btn-danger btn-sm\" @click=\"deleteProduct(p.product_id)\">Sil</button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n\n    <p v-if=\"!filteredProducts.length\" class=\"text-muted mt-3 text-center\">Hiç ürün bulunamadı.</p>\n  </section>\n</template>\n\n<script setup>\nimport { onMounted, ref, computed } from \"vue\";\nimport { useProductStore } from \"../store/ProductsStore\";\nimport axios from \"axios\";\n\nconst productStore = useProductStore();\nconst { products, loadCategory } = productStore;\n\nconst search = ref(\"\");\nconst selectedCategory = ref(\"\");\nconst stockFilter = ref(\"\");\n\n\n\nonMounted(() => {\n    console.log(\"mounted load öncesi\");\n    loadCategory();\n    console.log(loadCategory());\n});\n\nconst categories = computed(() => {\n  const set = new Set(products.map(p => p.category));\n  return [...set];\n});\n\nconst filteredProducts = computed(() =>\n  products.filter(p => {\n    const matchTitle = p.title.toLowerCase().includes(search.value.toLowerCase());\n    const matchCategory = selectedCategory.value ? p.category === selectedCategory.value : true;\n    const matchStock =\n      stockFilter.value === \"in\"\n        ? p.stock > 0\n        : stockFilter.value === \"out\"\n        ? p.stock <= 0\n        : true;\n    return matchTitle && matchCategory && matchStock;\n  })\n);\n\nfunction deleteProduct(id) {\n  if (confirm(\"Ürünü silmek istediğine emin misin?\")) {\n    axios\n      .post(\"http://localhost:8080/api/delete_product\", { id })\n      .then(() => {\n        productStore.products = productStore.products.filter(p => p.product_id !== id);\n      })\n      .catch(err => console.log(\"Silme hatası:\", err));\n  }\n}\n\nfunction editProduct(p) {\n  alert(`${p.title} düzenleme sayfasına yönlendirilecek (örnek).`);\n}\n</script>\n\n<style scoped>\n.filters {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 10px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}